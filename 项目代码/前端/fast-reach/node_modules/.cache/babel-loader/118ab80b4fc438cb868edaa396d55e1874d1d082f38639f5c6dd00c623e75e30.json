{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      records: [],\n      // 订单数据列表\n      total: 0,\n      // 总记录数\n      currentPage: 1,\n      // 当前页码\n      pageSize: 10,\n      // 每页显示的记录数\n      editflag: false,\n      form: {\n        id: \"\",\n        userId: \"\",\n        totalPrice: \"\",\n        status: \"\",\n        address: \"\"\n      },\n      // 搜索条件\n      searchMap: {\n        userId: \"\",\n        status: \"\"\n      },\n      // 订单状态\n      statusList: [{\n        value: \"0\",\n        label: \"未接单\"\n      }, {\n        value: \"1\",\n        label: \"已结单\"\n      }, {\n        value: \"2\",\n        label: \"派送中\"\n      }, {\n        value: \"3\",\n        label: \"已完成\"\n      }],\n      dialogFormVisible: false,\n      formLabelWidth: \"120px\"\n    };\n  },\n  methods: {\n    // 编辑订单\n    editOrder(row) {\n      this.editflag = true;\n      console.log(this.editflag);\n      this.form = {\n        id: row.id,\n        userId: row.userId,\n        totalPrice: row.totalPrice,\n        status: this.statusList[row.status].label,\n        address: row.address\n      };\n    },\n    // 提交表单\n    submitForm() {\n      axios({\n        url: \"/api/business/order/update\",\n        headers: {\n          token: localStorage.getItem(\"token\")\n        },\n        method: \"put\",\n        data: {\n          orderId: this.form.id,\n          status: this.form.status\n        }\n        // params: {\n        //   orderId: this.form.id,\n        //   status: this.form.status,\n        //   totalPrice: this.form.totalPrice,\n        //   address: this.form.address,\n        //\n      }).then(res => {\n        console.log(res.data.data);\n        this.loadData(); // 刷新订单数据\n        this.editflag = false; // 关闭编辑状态\n      }).catch(err => {\n        console.log(err.data.msg);\n      });\n    },\n    // 删除订单\n    deleteOrder(id) {\n      axios({\n        url: \"/api/business/order/delete\",\n        headers: {\n          token: localStorage.getItem(\"token\")\n        },\n        method: \"delete\",\n        params: {\n          orderId: id\n        }\n        // data: {\n        //   orderId: id,\n        // },\n      }).then(res => {\n        console.log(id);\n        console.log(res.data.data);\n        this.loadData(); // 刷新订单数据\n      }).catch(err => {\n        console.log(id);\n        console.log(err.data.msg);\n      });\n    },\n    // 查看订单详情\n    viewOrder(id) {\n      // 在这里添加响应按钮和配置路由，跳转到订单详情页\n      this.$router.push({\n        path: \"/business/manage/orderdetail\",\n        query: {\n          id: id\n        }\n      });\n    },\n    // 分页改变时触发\n    changePage(page) {\n      this.currentPage = page;\n      this.loadData(); // 重新加载数据\n    },\n    // 加载数据\n    loadData() {\n      axios({\n        url: \"/api/business/order/page\",\n        headers: {\n          token: localStorage.getItem(\"token\")\n        },\n        method: \"get\",\n        params: {\n          status: \"1\",\n          // 根据需求填写\n          page: this.currentPage,\n          // 当前页码\n          pageSize: this.pageSize,\n          // 每页数量\n          id: null,\n          // 根据需求填写\n          phone: null // 根据需求填写\n        }\n      }).then(res => {\n        console.log(res.data.data);\n        this.total = res.data.data.total;\n        this.records = res.data.data.records;\n      }).catch(err => {\n        console.log(err.data.msg);\n      });\n    }\n  },\n  created() {\n    this.loadData(); // 初始化加载数据\n  }\n};","map":{"version":3,"names":["axios","data","records","total","currentPage","pageSize","editflag","form","id","userId","totalPrice","status","address","searchMap","statusList","value","label","dialogFormVisible","formLabelWidth","methods","editOrder","row","console","log","submitForm","url","headers","token","localStorage","getItem","method","orderId","then","res","loadData","catch","err","msg","deleteOrder","params","viewOrder","$router","push","path","query","changePage","page","phone","created"],"sources":["src/components/business/BusinessOrderManage.vue"],"sourcesContent":["TODO\r\n点击订单管理，自动跳转到分页查询，这个界面要借鉴黑马苍穹外卖的UI设计，有分页查询（包括根据关键字号查询），修改订单状态，删除订单，订单分页查询详情\r\nTODO\r\n查看订单详情跳转到src\\views\\business\\orderfunction\\DetailOrderView.vue，这个你们自己添加响应按钮和配置路由，注意是一个订单一个“查看详情”按钮\r\nTODO 请求的时候data里面的数据得根据前端设计填充\r\n<template>\r\n  <div class=\"common-layout\">\r\n    <el-container>\r\n      <el-header>\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"6\">\r\n            <div class=\"grid-content ep-bg-purple\">\r\n              <el-input v-model=\"searchMap.id\" style=\"width: 240px\" placeholder=\"输入订单ID\" />\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <div class=\"grid-content ep-bg-purple\">\r\n              <el-date-picker v-model=\"searchMap.date\" type=\"date\" placeholder=\"选择订单日期\" :size=\"size\" />\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <div class=\"grid-content ep-bg-purple\">\r\n              <el-select v-model=\"searchMap.status\" placeholder=\"订单状态\" size=\"large\" style=\"width: 240px\">\r\n                <el-option v-for=\"item in statusList\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" />\r\n              </el-select>\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <div class=\"grid-content ep-bg-purple\">\r\n              <el-button type=\"primary\" @click=\"loadData\">查询</el-button>\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n      </el-header>\r\n      <el-main>\r\n        <div>\r\n          <el-table :data=\"records\" style=\"width: 100%\">\r\n            <el-table-column label=\"订单ID\" prop=\"id\" width=\"120\" />\r\n            <el-table-column label=\"顾客ID\" prop=\"userId\" width=\"120\" />\r\n            <el-table-column label=\"价格\" prop=\"totalPrice\" width=\"120\" />\r\n            <el-table-column label=\"状态\" prop=\"status\" width=\"120\">\r\n              <template slot-scope=\"scope\">\r\n                <span v-if=\"scope.row.status === 0\">未接单</span>\r\n                <span v-else-if=\"scope.row.status === 1\">已结单</span>\r\n                <span v-else-if=\"scope.row.status === 2\">派送中</span>\r\n                <span v-else-if=\"scope.row.status === 3\">已完成</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"地址\" prop=\"address\" />\r\n            <el-table-column label=\"操作\" width=\"120\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button type=\"text\" @click=\"editOrder(scope.row)\">编辑</el-button>\r\n                <el-button type=\"text\" @click=\"deleteOrder(scope.row.id)\">删除</el-button>\r\n                <el-button type=\"text\" @click=\"viewOrder(scope.row.id)\">查看详情</el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n          <div style=\"margin-top: 20px\">\r\n            <el-pagination :current-page=\"currentPage\" :page-size=\"pageSize\" @current-change=\"changePage\" layout=\"total\" :total=\"total\" />\r\n          </div>\r\n        </div>\r\n        <el-dialog title=\"修改订单\" :visible.sync=\"editflag\">\r\n          <el-form :model=\"form\">\r\n            <el-form-item label=\"订单ID\" :label-width=\"formLabelWidth\">\r\n              <el-input v-model=\"form.id\" autocomplete=\"off\" disabled />\r\n            </el-form-item>\r\n            <el-form-item label=\"顾客ID\" :label-width=\"formLabelWidth\">\r\n              <el-input v-model=\"form.userId\" autocomplete=\"off\" disabled />\r\n            </el-form-item>\r\n            <el-form-item label=\"状态\" :label-width=\"formLabelWidth\">\r\n              <el-select v-model=\"form.status\" placeholder=\"请选择状态\">\r\n                <el-option v-for=\"status in statusList\" :key=\"status.value\" :label=\"status.label\" :value=\"status.value\" />\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"地址\" :label-width=\"formLabelWidth\">\r\n              <el-input v-model=\"form.address\" autocomplete=\"off\" disabled />\r\n            </el-form-item>\r\n          </el-form>\r\n          <div slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"editflag = false\">取消</el-button>\r\n            <el-button type=\"primary\" @click=\"submitForm\">确定</el-button>\r\n          </div>\r\n        </el-dialog>\r\n      </el-main>\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      records: [], // 订单数据列表\r\n      total: 0, // 总记录数\r\n      currentPage: 1, // 当前页码\r\n      pageSize: 10, // 每页显示的记录数\r\n      editflag: false,\r\n      form: {\r\n        id: \"\",\r\n        userId: \"\",\r\n        totalPrice: \"\",\r\n        status: \"\",\r\n        address: \"\",\r\n      },\r\n      // 搜索条件\r\n      searchMap: {\r\n        userId: \"\",\r\n        status: \"\",\r\n      },\r\n      // 订单状态\r\n      statusList: [\r\n        { value: \"0\", label: \"未接单\" },\r\n        { value: \"1\", label: \"已结单\" },\r\n        { value: \"2\", label: \"派送中\" },\r\n        { value: \"3\", label: \"已完成\" },\r\n      ],\r\n      dialogFormVisible: false,\r\n      formLabelWidth: \"120px\",\r\n    };\r\n  },\r\n  methods: {\r\n    // 编辑订单\r\n    editOrder(row) {\r\n      this.editflag = true;\r\n      console.log(this.editflag);\r\n      this.form = {\r\n        id: row.id,\r\n        userId: row.userId,\r\n        totalPrice: row.totalPrice,\r\n        status: this.statusList[row.status].label,\r\n        address: row.address,\r\n      };\r\n    },\r\n    // 提交表单\r\n    submitForm() {\r\n      axios({\r\n        url: \"/api/business/order/update\",\r\n        headers: {\r\n          token: localStorage.getItem(\"token\"),\r\n        },\r\n        method: \"put\",\r\n        data: {\r\n          orderId: this.form.id,\r\n          status: this.form.status,\r\n        },\r\n        // params: {\r\n        //   orderId: this.form.id,\r\n        //   status: this.form.status,\r\n        //   totalPrice: this.form.totalPrice,\r\n        //   address: this.form.address,\r\n        //\r\n      })\r\n        .then((res) => {\r\n          console.log(res.data.data);\r\n          this.loadData(); // 刷新订单数据\r\n          this.editflag = false; // 关闭编辑状态\r\n        })\r\n        .catch((err) => {\r\n          console.log(err.data.msg);\r\n        });\r\n    },\r\n    // 删除订单\r\n    deleteOrder(id) {\r\n      axios({\r\n        url: \"/api/business/order/delete\",\r\n        headers: {\r\n          token: localStorage.getItem(\"token\"),\r\n        },\r\n        method: \"delete\",\r\n        params: {\r\n          orderId: id,\r\n        },\r\n        // data: {\r\n        //   orderId: id,\r\n        // },\r\n      })\r\n        .then((res) => {\r\n          console.log(id);\r\n          console.log(res.data.data);\r\n          this.loadData(); // 刷新订单数据\r\n        })\r\n        .catch((err) => {\r\n          console.log(id);\r\n          console.log(err.data.msg);\r\n        });\r\n    },\r\n    // 查看订单详情\r\n    viewOrder(id) {\r\n      // 在这里添加响应按钮和配置路由，跳转到订单详情页\r\n      this.$router.push({\r\n        path: \"/business/manage/orderdetail\",\r\n        query: {\r\n          id: id,\r\n        },\r\n      });\r\n    },\r\n    // 分页改变时触发\r\n    changePage(page) {\r\n      this.currentPage = page;\r\n      this.loadData(); // 重新加载数据\r\n    },\r\n    // 加载数据\r\n    loadData() {\r\n      axios({\r\n        url: \"/api/business/order/page\",\r\n        headers: {\r\n          token: localStorage.getItem(\"token\"),\r\n        },\r\n        method: \"get\",\r\n        params: {\r\n          status: \"1\", // 根据需求填写\r\n          page: this.currentPage, // 当前页码\r\n          pageSize: this.pageSize, // 每页数量\r\n          id: null, // 根据需求填写\r\n          phone: null, // 根据需求填写\r\n        },\r\n      })\r\n        .then((res) => {\r\n          console.log(res.data.data);\r\n          this.total = res.data.data.total;\r\n          this.records = res.data.data.records;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err.data.msg);\r\n        });\r\n    },\r\n  },\r\n  created() {\r\n    this.loadData(); // 初始化加载数据\r\n  },\r\n};\r\n</script>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}